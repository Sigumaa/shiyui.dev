---
interface EventItem {
  year: string
  month: string
  content: string
}

interface Props {
  events: EventItem[]
  class?: string
}

const { events, class: className } = Astro.props as Props

// 年月をシンプルに1つのラベルへ（例: 2020.04）
const formatYM = (y: string, m?: string) =>
  !m || m.trim() === '' ? y : `${y}.${m.padStart(2, '0')}`
---

<div class={`animate ${className || ''}`}>
  <ul class='ps-0'>
    {events.map((e, i) => (
      <li class='group relative flex list-none ps-0 gap-x-1 py-2'>
        {/* 丸アイコンはフロー内配置にして直後に年月を表示 */}
        <span class='z-10 my-2 ms-2 h-3 w-3 min-w-3 rounded-full border-2 border-muted-foreground'></span>
        {i !== events.length - 1 && (
          <span class='absolute start-[12px] top-[20px] w-1 bg-border' style={{ height: 'calc(100% - 4px)' }} />
        )}
        <div class='flex items-start gap-[4ch] text-muted-foreground'>
          <samp class='block py-1 text-sm font-mono'>{formatYM(e.year, e.month)}</samp>
          <div set:text={e.content} />
        </div>
      </li>
    ))}
  </ul>
</div>
